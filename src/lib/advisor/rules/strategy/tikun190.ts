/**
 * ××¡×˜×¨×˜×’×™×”: ×ª×™×§×•×Ÿ 190 ×œ×’×™×œ ×”×©×œ×™×©×™
 *
 * ×ª× ××™: ×’×™×œ >= 60, × ×›×¡×™× × ×–×™×œ×™× > 150,000
 * ×§×˜×’×•×¨×™×”: strategy
 */

import { createRule } from '../../ruleFactory';
import {
  getAge,
  getLiquidAssets,
} from '../../helpers';

export default createRule({
  id: 'tikun-190',
  name: '×ª×™×§×•×Ÿ 190 ×œ×’×™×œ ×”×©×œ×™×©×™',

  condition: (ctx) => {
    // ×’×™×œ >= 60
    if (getAge(ctx) < 60) return false;

    // × ×›×¡×™× × ×–×™×œ×™× > 150,000
    if (getLiquidAssets(ctx) <= 150000) return false;

    return true;
  },

  recommendation: {
    title: '×”×˜×‘×ª ×ª×™×§×•×Ÿ 190 ×œ×’×™×œ ×”×©×œ×™×©×™',
    description: `×‘×’×™×œ×š ×•×¢× × ×–×™×œ×•×ª ×¤× ×•×™×”, ××•××œ×¥ ×œ×‘×—×•×Ÿ ×”×¤×§×“×” ×œ×§×•×¤×ª ×’××œ ×œ×¤×™ ×ª×™×§×•×Ÿ 190. ×–×” ×××¤×©×¨ ×ª×©×œ×•× ××¡ ××•×¤×—×ª ×©×œ 15% × ×•××™× ×œ×™ (×‘××§×•× 25% ×¨×™××œ×™) ×•××•×¤×¦×™×” ×œ××©×™×›×” ×§×¦×‘×ª×™×ª ×¤×˜×•×¨×” ×××¡ ×œ×—×œ×•×˜×™×Ÿ.

ğŸ“‹ ×™×ª×¨×•× ×•×ª ×ª×™×§×•×Ÿ 190:
â€¢ ××¡ ××•×¤×—×ª ×©×œ 15% ×‘×œ×‘×“ ×¢×œ ×”×¨×•×•×—×™×
â€¢ ××¤×©×¨×•×ª ×œ×§×¦×‘×” ×¤×˜×•×¨×” ×××¡ ×œ×—×œ×•×˜×™×Ÿ
â€¢ ×’××™×©×•×ª ×‘××©×™×›×” (×—×“-×¤×¢××™ ××• ×§×¦×‘×”)
â€¢ ×œ×œ× ×ª×§×¨×ª ×”×¤×§×“×” ×©× ×ª×™×ª

âš ï¸ ×ª× ××™×:
â€¢ ×’×™×œ 60+
â€¢ ×”×¤×§×“×” ×œ×§×•×¤×ª ×’××œ ×××•×©×¨×ª
â€¢ ×”××ª× ×” ×©×œ 5 ×©× ×™× ×œ×¤× ×™ ××©×™×›×” (××• ×’×™×œ 65)

ğŸ’¡ ××ª××™× ×‘××™×•×—×“ ×œ×›×¡×£ ×©"×©×•×›×‘" ×‘×‘× ×§ ××• ×‘×¤×™×§×“×•×Ÿ.`,
    type: 'tax_benefit',
    priority: 'high',
    category: 'strategy',
    actionUrl: 'https://www.kolzchut.org.il/he/×§×•×¤×ª_×’××œ_×œ×”×©×§×¢×”',
    potentialValue: 15000,
  },

  getEligibilityReason: (ctx) => {
    const age = getAge(ctx);
    const liquid = getLiquidAssets(ctx).toLocaleString('he-IL');
    return `×’×™×œ ${age} ×¢× ${liquid}â‚ª × ×–×™×œ×™× - ×–×›××™ ×œ×”×˜×‘×•×ª ×ª×™×§×•×Ÿ 190`;
  },
});
