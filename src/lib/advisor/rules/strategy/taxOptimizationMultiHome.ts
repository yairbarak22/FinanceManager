/**
 * ××¡×˜×¨×˜×’×™×”: ×ª×›× ×•×Ÿ ××¡ ×¨×™×‘×•×™ × ×›×¡×™×
 *
 * ×ª× ××™: 2+ × ×›×¡×™ × ×“×œ"×Ÿ
 * ×§×˜×’×•×¨×™×”: strategy
 */

import { createRule } from '../../ruleFactory';
import {
  getRealEstateCount,
  getRealEstateValue,
} from '../../helpers';

export default createRule({
  id: 'tax-optimization-multi-home',
  name: '×ª×›× ×•×Ÿ ××¡ ×œ×¨×™×‘×•×™ × ×›×¡×™×',

  condition: (ctx) => {
    // ×™×© ×œ×¤×—×•×ª 2 × ×›×¡×™ × ×“×œ"×Ÿ
    return getRealEstateCount(ctx) >= 2;
  },

  recommendation: {
    title: '×ª×›× ×•×Ÿ ××¡ ×œ×¤× ×™ ××›×™×¨×ª × ×›×¡',
    description: `××›×™×•×•×Ÿ ×©×‘×‘×¢×œ×•×ª×š ××¡×¤×¨ × ×›×¡×™×, ××›×™×¨×” ×©×œ ××—×“ ××”× ×—×™×™×‘×ª ×‘×ª×›× ×•×Ÿ ××¡ ×©×‘×— (×—×™×©×•×‘ ×œ×™× ×™××¨×™ ××•×˜×‘ ××• × ×™×¦×•×œ ×¤×˜×•×¨×™× ×¡×¤×¦×™×¤×™×™×). ×‘×—×™×¨×” ×©×’×•×™×” ×©×œ ×¡×“×¨ ×”××›×™×¨×” ×¢×œ×•×œ×” ×œ×¢×œ×•×ª ×¢×©×¨×•×ª ××œ×¤×™ ×©×§×œ×™×.

ğŸ“‹ × ×§×•×“×•×ª ×œ×‘×“×™×§×”:
â€¢ ××™×–×• ×“×™×¨×” × ×¨×›×©×” ×¨××©×•× ×” (×œ×—×™×©×•×‘ ×œ×™× ×™××¨×™)
â€¢ ×”×× ×™×© ×¤×˜×•×¨ "×“×™×¨×” ×™×—×™×“×”" ×–××™×Ÿ
â€¢ ×ª××¨×™×›×™ ×¨×›×™×©×” ×•×©×•×•×™ ××§×•×¨×™
â€¢ ×©×™×¤×•×¨×™× ×•×”×©×‘×—×•×ª ×©×‘×•×¦×¢×•

âš–ï¸ ××¡×˜×¨×˜×’×™×•×ª ××¡:
â€¢ ×—×™×©×•×‘ ×œ×™× ×™××¨×™ ××•×˜×‘ (×œ× ×›×¡×™× ×©× ×¨×›×©×• ×œ×¤× ×™ 2014)
â€¢ ×¤×¨×™×¡×ª ××¡ ×©×‘×— ×¢×œ ×¤× ×™ 4 ×©× ×™×
â€¢ ×§×™×–×•×– ×”×•×¦××•×ª ×¨×›×™×©×” ×•×©×™×¤×•×¥
â€¢ ×©×™××•×© ×‘×¤×˜×•×¨ ×“×™×¨×” ×™×—×™×“×” (×× ×–××™×Ÿ)

ğŸ’¡ ××•××œ×¥ ×œ×”×ª×™×™×¢×¥ ×¢× ×™×•×¢×¥ ××¡ ×œ×¤× ×™ ×›×œ ××›×™×¨×”.`,
    type: 'tax_benefit',
    priority: 'medium',
    category: 'strategy',
    actionUrl: 'https://www.gov.il/he/service/mas_shevach_calculator',
    potentialValue: 50000,
  },

  getEligibilityReason: (ctx) => {
    const count = getRealEstateCount(ctx);
    const value = getRealEstateValue(ctx).toLocaleString('he-IL');
    return `${count} × ×›×¡×™ × ×“×œ"×Ÿ ×‘×©×•×•×™ ×›×•×œ×œ ×©×œ ${value}â‚ª - ×ª×›× ×•×Ÿ ××¡ × ×›×•×Ÿ ×™×›×•×œ ×œ×—×¡×•×š ×¢×©×¨×•×ª ××œ×¤×™ ×©×§×œ×™×`;
  },
});
